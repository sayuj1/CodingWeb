<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.3/ace.js"></script>
<style>
body{
    background-color: lightgray;
}   
.a{
 float: left;
 margin-left: 2%;
}
.b{
 float: left;
 margin-left: 2%;
}
.c{
float: left;
margin-left: 2%;
}
#output-preview{
margin-top: 2%;
width: 100%;
height: 100vh;
background-color: white;
}
</style>
</head>
<body>
    
        <div contenteditable="true" class="a ace_autocomplete" style="width: 30%; height: 200px;margin-top: 2%;background-color: white;" id="write">
            
            </div>
       
    <div contenteditable="true" class="b" style="width: 30%; height: 200px;margin-top: 2%;background-color: white;" id="writer2">
            
    </div>
    <div contenteditable="true" class="c" style="width: 30%; height: 200px;margin-top: 2%;background-color: white;" id="writer3">
        </div>
<div id = "js">
</div>
<!--<div id="html-preview"></div> -->
<iframe id="output-preview" frameborder="0">

</iframe>


<script>
    var h = ace.edit("write");   
    h.getSession().setMode("ace/mode/html");
    h.setTheme("ace/theme/xcode");
    h.setValue(``,1);
    h.setOptions({
        fontSize: "15pt",
    });

$('#write').on('keyup', function(e){
    var h = ace.edit("write"); 
    $('#output-preview').contents().find('body').empty();
   // var x = $('#write').text();
    x = h.getValue();
    
    //$('#output-preview').contents().find('body').append(x);
    var e = ace.edit("writer3"); 
    l=e.getValue();
    document.getElementById('output-preview').srcdoc = x+`<script>`+l+`<\/script>`;
//document.getElementById('html-preview').innerHTML = x;


});


var c = ace.edit("writer2");   
    c.getSession().setMode("ace/mode/css");
   // c.setTheme("ace/theme/xcode");
    c.setOptions({
        fontSize: "15pt",
    });
    c.setValue(``,1);

$('#writer2').on('keyup', function(e){
    
    var c = ace.edit("writer2");   
    $('#output-preview').contents().find('head').empty();
    y = c.getValue();
   // console.log(y);
   $('#output-preview').contents().find('head').append(`<style>`+y+`</style>`);
    
});

var e = ace.edit("writer3");
       
        e.getSession().setMode("ace/mode/javascript");
       // e.setTheme("ace/theme/github");
        e.setValue(``,1);
        e.setOptions({
        fontSize: "15pt",
        
    });

$('#writer3').on('keyup', function(e){
    
    var e = ace.edit("writer3"); 
    console.log(e.getValue());
   
    l=e.getValue();
    
    
    var h = ace.edit("write"); 
    $('#output-preview').contents().find('body').empty();
  
    x = h.getValue();
   document.getElementById('output-preview').srcdoc =`<script>`+l+`<\/script>`+x;

});

</script>

</body>
</html>